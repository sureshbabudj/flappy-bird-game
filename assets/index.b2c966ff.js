var O=Object.defineProperty;var H=(e,t,r)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var L=(e,t,r)=>(H(e,typeof t!="symbol"?t+"":t,r),r);const I=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const v of o.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&c(v)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}};I();const s=document.getElementById("canvas"),a=s.getContext("2d");s.width=1024;s.height=512;let l=5;const T=document.querySelector("#cloud"),k=document.querySelector("#bird"),g={start:"Press <span class='key'>space</span> to start",pause:"Press <span class='key'>p</span> to pause",resume:"Press <span class='key'>space</span> to resume"},F=.25;class A{constructor(t){this.width=50,this.height=50,this.vx=0,this.vy=0,this.image=new Image,this.image.src=k.src,this.x=s.width/2-this.width/2,this.y=s.height/2-this.height/2;const r=new Promise(c=>{this.image.onload=()=>{this.ready=!0,c(!0)}});t&&t.push(r)}draw(){!this.ready||a.drawImage(this.image,this.x,this.y,this.width,this.height)}update(){this.draw(),this.vy+=F,this.y+=this.vy}}class R{constructor(){this.width=s.width,this.height=s.height}draw(){const t=a.createLinearGradient(0,0,0,s.height);t.addColorStop(0,"#9ce6fa"),t.addColorStop(.75,"#e3f9ff"),t.addColorStop(1,"#9ce6fa"),a.fillStyle=t,a.fillRect(0,0,this.width,this.height)}}class P{constructor(t){this.vx=Math.random()*-4-1,this.vy=0,this.image=new Image,this.image.src=T.src;const r=new Promise(c=>{this.image.onload=()=>{this.ready=!0;const i=Math.round(Math.random()*8)+5;this.width=this.image.width/i,this.height=this.image.height/i,this.x=s.width,this.y=Math.random()*(s.height-this.height),c(!0)}});t&&t.push(r)}draw(){!this.ready||a.drawImage(this.image,this.x,this.y,this.width,this.height)}update(){this.draw(),this.x+=this.vx}}class d{constructor(){this.width=100,this.height=s.height/2,this.x=s.width+this.width+Math.round(Math.random()*this.width),this.y=b()}draw(){const t=a.createLinearGradient(this.x,0,this.x+this.width,0);t.addColorStop(0,"#cdcdcd"),t.addColorStop(.5,"#ffffff"),t.addColorStop(1,"#cdcdcd"),a.fillStyle=t,a.fillRect(this.x,this.y,this.width,this.height),a.fillRect(this.x-2,this.y>0?this.y:this.y+this.height-10,this.width+4,10)}update(){this.draw(),this.x-=2}}L(d,"pos","top");function b(){let e=[25,50,75,100,125,150],t=0;return d.pos==="top"?(t=-25-e[Math.ceil(Math.random()*e.length)-1],d.pos="bottom"):(t=s.height/2+e[Math.ceil(Math.random()*e.length)-1]+25,d.pos="top"),t}const q=new R;let f=[],y=[],n,p,M=Date.now(),m,h={},x=[];const w=document.querySelector(".subtitle"),E=document.querySelector(".score"),u=document.querySelector("#gameOver"),D=document.querySelector("#restart");function N(){E.innerHTML="",w.innerHTML="",u.style.display="block",u.style.top=s.height/2-u.offsetHeight/2+"px",u.style.left=s.width/2-u.offsetWidth/2+"px";const e=document.querySelector("#score");e.innerHTML=`${p}`}function S(){w.innerHTML=g.start,u.style.display="none",B(),C()}D.addEventListener("click",S);function B(){h={ready:!1,over:!1,pause:!1},q.draw(),f=[new P(x)],y=[new d,new d],n=new A(x),n.draw(),p=0,M=Date.now(),m=void 0,Promise.all(x).then(()=>{n.draw()})}function C(){if(m=requestAnimationFrame(C),!h.ready||h.pause)return;if(h.over){cancelAnimationFrame(m),m=void 0,N();return}q.draw(),f.forEach((t,r)=>{t.update(),t.x+t.width<=0&&f.splice(r,1)}),y.forEach((t,r)=>{t.update(),t.x+t.width<=0&&y.splice(r,1),t.x+l<=n.x+n.width&&t.x+t.width-l>=n.x&&t.y+l<=n.y+n.height&&t.y+t.height-l>=n.y&&(h.over=!0)}),n.update(),(n.y<-l||n.y+n.height>s.height+l)&&(h.over=!0),f.length<5&&f.push(new P);const e=Date.now();e-M>=1e3&&(p++,E.innerHTML=`SCORE: <span class="highlight key">${p}<span>`,p%3===0&&y.push(new d,new d),M=e)}addEventListener("keydown",function({key:e}){e===" "&&(h.ready=!0,h.pause=!1,n.vy=-5,h.over?S():w.innerHTML=g.pause),(e==="p"||e==="P")&&h.ready&&(h.pause=!0,w.innerHTML=h.pause?g.resume:g.pause)});S();
